# 2. Commands

## üéØ Learning Objectives
- [ ] Master essential Helm listing commands
- [ ] Understand how to retrieve chart values
- [ ] Learn to view release history
- [ ] Practice command combinations and options

## üìã Essential Helm Commands

### `helm list` - List All Releases

#### Basic List Command
```bash
helm list
```

#### List All Namespaces
```bash
helm list --all-namespaces
```

#### List with Additional Details
```bash
helm list --output table
helm list --output json
helm list --output yaml
```

#### Filter by Status
```bash
helm list --deployed
helm list --failed
helm list --pending
```

#### Example Output
```
NAME            NAMESPACE       REVISION        UPDATED                                 STATUS          CHART                   APP VERSION
my-release      default         1               2024-01-15 10:30:00.123456789 +0000    deployed        nginx-1.15.4            1.25.3
```

### `helm get values` - Retrieve Release Values

#### Get Current Values
```bash
helm get values my-release
```

#### Get All Values (including defaults)
```bash
helm get values my-release --all
```

#### Get Values in Different Formats
```bash
helm get values my-release --output yaml
helm get values my-release --output json
```

#### Get Values from Specific Revision
```bash
helm get values my-release --revision 2
```

#### Example Output
```yaml
# User-supplied values
replicaCount: 3
image:
  repository: nginx
  tag: "1.25.3"
service:
  type: LoadBalancer
  port: 80
```

### `helm history` - View Release History

#### Basic History Command
```bash
helm history my-release
```

#### History with Maximum Results
```bash
helm history my-release --max 10
```

#### History in Different Formats
```bash
helm history my-release --output table
helm history my-release --output json
```

#### Example Output
```
REVISION        UPDATED                         STATUS          CHART           APP VERSION     DESCRIPTION
1               Mon Jan 15 10:30:00 2024        deployed        nginx-1.15.4    1.25.3          Install complete
2               Mon Jan 15 11:15:00 2024        deployed        nginx-1.15.4    1.25.3          Upgrade complete
3               Mon Jan 15 12:00:00 2024        failed          nginx-1.15.5    1.25.4          Upgrade failed
```

## üîç Additional Useful Commands

### `helm get manifest` - Get Release Manifests
```bash
helm get manifest my-release
helm get manifest my-release --revision 1
```

### `helm get notes` - Get Release Notes
```bash
helm get notes my-release
```

### `helm get hooks` - Get Release Hooks
```bash
helm get hooks my-release
```

### `helm status` - Get Release Status
```bash
helm status my-release
helm status my-release --show-resources
```

## üìä Command Combinations and Workflows

### Complete Release Information
```bash
# Get comprehensive release information
helm status my-release
helm get values my-release --all
helm history my-release
helm get manifest my-release
```

### Troubleshooting Workflow
```bash
# 1. Check current status
helm list --failed

# 2. Get detailed status of failed release
helm status failed-release

# 3. Check history to see what went wrong
helm history failed-release

# 4. Compare values between working and failed revisions
helm get values failed-release --revision 1
helm get values failed-release --revision 2
```

### Multi-Namespace Monitoring
```bash
# List all releases across namespaces
helm list --all-namespaces

# Filter by specific namespace
helm list --namespace production

# Get releases in multiple namespaces
helm list --namespace dev,staging,prod
```

## üõ†Ô∏è Advanced Options

### Output Formatting
```bash
# Table format (default)
helm list --output table

# JSON for scripting
helm list --output json | jq '.[] | select(.status=="deployed")'

# YAML for configuration review
helm get values my-release --output yaml
```

### Filtering and Sorting
```bash
# Filter by chart name pattern
helm list --filter 'nginx.*'

# Sort by different columns
helm list --sort-reverse

# Date filtering
helm list --date 2024-01-15
```

## üìù Practice Exercises

### Exercise 1: Basic Commands
1. List all Helm releases: `helm list`
2. Get values for a specific release: `helm get values <release-name>`
3. Check history of a release: `helm history <release-name>`

### Exercise 2: Detailed Information
1. List releases in all namespaces: `helm list --all-namespaces`
2. Get complete values (including defaults): `helm get values <release-name> --all`
3. View release manifest: `helm get manifest <release-name>`

### Exercise 3: Troubleshooting
1. List only failed releases: `helm list --failed`
2. Check status of a specific release: `helm status <release-name>`
3. Compare values between revisions: `helm get values <release-name> --revision 1`

## üéì Command Reference Summary

| Command | Purpose | Common Options |
|---------|---------|----------------|
| `helm list` | List releases | `--all-namespaces`, `--failed`, `--deployed` |
| `helm get values` | Get release values | `--all`, `--revision N`, `--output yaml` |
| `helm history` | View release history | `--max N`, `--output table` |
| `helm status` | Get release status | `--show-resources` |
| `helm get manifest` | Get K8s manifests | `--revision N` |

## ‚û°Ô∏è Next Steps
Now that you understand basic Helm commands, proceed to [3. Understanding-Chart-Structure.md](3.%20Understanding-Chart-Structure.md) to learn about Helm chart organization.