# 1. Minikube Installation and Setup

## üéØ Learning Objectives
- [ ] Install minikube on different operating systems
- [ ] Understand minikube system requirements
- [ ] Configure minikube with different drivers
- [ ] Set up kubectl to work with minikube
- [ ] Verify installation and basic functionality

## üìã Prerequisites
- Administrative access to your machine
- 2 CPUs or more
- 2GB of free memory
- 20GB of free disk space
- Internet connection
- Container or virtual machine manager (Docker, VirtualBox, etc.)

## üîß Step 1: System Requirements Check

### Windows Requirements
```powershell
# Check system specifications
Get-ComputerInfo | Select-Object CsProcessors, CsTotalPhysicalMemory, CsSystemType

# Check virtualization support
Get-WmiObject -Class Win32_Processor | Select-Object Name, VirtualizationFirmwareEnabled

# Check available disk space
Get-WmiObject -Class Win32_LogicalDisk | Select-Object DeviceID, Size, FreeSpace
```

### macOS Requirements
```bash
# Check system information
system_profiler SPHardwareDataType

# Check CPU cores
sysctl -n hw.ncpu

# Check memory
sysctl -n hw.memsize | awk '{print $0/1024/1024/1024 " GB"}'

# Check virtualization support
sysctl kern.hv_support
```

### Linux Requirements
```bash
# Check CPU information
lscpu

# Check memory
free -h

# Check disk space
df -h

# Check virtualization support
egrep -c '(vmx|svm)' /proc/cpuinfo
lsmod | grep kvm
```

## üì• Step 2: Installation Methods

### Method 1: Direct Binary Download

#### Windows Installation
```powershell
# Download latest minikube
$minikubeUrl = "https://storage.googleapis.com/minikube/releases/latest/minikube-windows-amd64.exe"
Invoke-WebRequest -Uri $minikubeUrl -OutFile "minikube.exe"

# Move to system PATH
Move-Item "minikube.exe" "C:\Windows\System32\minikube.exe"

# Verify installation
minikube version
```

#### macOS Installation
```bash
# Using curl
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64
sudo install minikube-darwin-amd64 /usr/local/bin/minikube

# Using Homebrew (recommended)
brew install minikube

# Verify installation
minikube version
```

#### Linux Installation
```bash
# Download binary
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64

# Install
sudo install minikube-linux-amd64 /usr/local/bin/minikube

# Verify installation
minikube version
```

### Method 2: Package Managers

#### Windows (Chocolatey)
```powershell
# Install using Chocolatey
choco install minikube

# Verify installation
minikube version
```

#### Windows (Scoop)
```powershell
# Install using Scoop
scoop install minikube

# Verify installation
minikube version
```

#### Ubuntu/Debian
```bash
# Download and install
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube_latest_amd64.deb
sudo dpkg -i minikube_latest_amd64.deb

# Verify installation
minikube version
```

#### CentOS/RHEL/Fedora
```bash
# Download and install
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-latest.x86_64.rpm
sudo rpm -Uvh minikube-latest.x86_64.rpm

# Verify installation
minikube version
```

## üöó Step 3: Driver Configuration

### Docker Driver (Recommended)
```bash
# Install Docker first (if not installed)
# Windows: Download Docker Desktop
# macOS: brew install docker
# Linux: Follow Docker installation guide

# Set Docker as default driver
minikube config set driver docker

# Verify Docker is available
docker version
```

### VirtualBox Driver
```bash
# Install VirtualBox
# Windows: Download from VirtualBox website
# macOS: brew install virtualbox
# Linux: sudo apt install virtualbox (Ubuntu) or equivalent

# Set VirtualBox as driver
minikube config set driver virtualbox
```

### Hyper-V Driver (Windows)
```powershell
# Enable Hyper-V feature
Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All

# Set Hyper-V as driver
minikube config set driver hyperv
```

### VMware Driver
```bash
# Install VMware Workstation/Fusion
# Download VMware driver plugin
# https://github.com/machine-drivers/docker-machine-driver-vmware

# Set VMware as driver
minikube config set driver vmware
```

## üöÄ Step 4: First Startup and Configuration

### Basic Startup
```bash
# Start minikube with default settings
minikube start

# Check status
minikube status

# Get cluster information
kubectl cluster-info

# View nodes
kubectl get nodes
```

### Customized Startup
```bash
# Start with specific resources
minikube start --cpus=4 --memory=8192 --disk-size=40g

# Start with specific Kubernetes version
minikube start --kubernetes-version=v1.28.0

# Start with specific driver
minikube start --driver=docker

# Start with addons enabled
minikube start --addons=ingress,dashboard,metrics-server
```

### Configuration Examples
```bash
# Set default configuration
minikube config set cpus 4
minikube config set memory 8192
minikube config set disk-size 40g
minikube config set driver docker

# View current configuration
minikube config view

# Start with saved configuration
minikube start
```

## üîß Step 5: kubectl Configuration

### Automatic Configuration
```bash
# Minikube automatically configures kubectl
# Check current context
kubectl config current-context

# View available contexts
kubectl config get-contexts

# Switch to minikube context (if needed)
kubectl config use-context minikube
```

### Manual Configuration
```bash
# Get minikube kubeconfig
minikube update-context

# View kubeconfig
kubectl config view

# Test connection
kubectl get nodes
kubectl get pods -A
```

## üîç Step 6: Installation Verification

### Comprehensive Verification Script
```bash
#!/bin/bash

echo "üîç Minikube Installation Verification"
echo "====================================="

# Check minikube version
echo "1. Minikube Version:"
minikube version

echo ""
echo "2. Cluster Status:"
minikube status

echo ""
echo "3. Node Information:"
kubectl get nodes -o wide

echo ""
echo "4. System Pods:"
kubectl get pods -n kube-system

echo ""
echo "5. Cluster Info:"
kubectl cluster-info

echo ""
echo "6. Available Addons:"
minikube addons list

echo ""
echo "7. Docker Status (if using Docker driver):"
minikube docker-env
```

### Windows Verification Script
```powershell
# Create verification script
@'
Write-Host "üîç Minikube Installation Verification" -ForegroundColor Green
Write-Host "=====================================" -ForegroundColor Green

Write-Host "`n1. Minikube Version:" -ForegroundColor Yellow
minikube version

Write-Host "`n2. Cluster Status:" -ForegroundColor Yellow
minikube status

Write-Host "`n3. Node Information:" -ForegroundColor Yellow
kubectl get nodes -o wide

Write-Host "`n4. System Pods:" -ForegroundColor Yellow
kubectl get pods -n kube-system

Write-Host "`n5. Cluster Info:" -ForegroundColor Yellow
kubectl cluster-info

Write-Host "`n6. Available Addons:" -ForegroundColor Yellow
minikube addons list

Write-Host "`n‚úÖ Verification Complete" -ForegroundColor Green
'@ | Out-File -FilePath "verify-minikube.ps1" -Encoding UTF8

# Run verification
.\verify-minikube.ps1
```

## üõ†Ô∏è Step 7: Essential Configuration

### Resource Limits
```bash
# Set memory limit
minikube config set memory 8192

# Set CPU limit
minikube config set cpus 4

# Set disk size
minikube config set disk-size 50g

# Apply changes (requires restart)
minikube stop
minikube start
```

### Networking Configuration
```bash
# Enable ingress addon
minikube addons enable ingress

# Enable DNS addon
minikube addons enable dns

# Configure service CIDR (advanced)
minikube start --service-cluster-ip-range=10.96.0.0/16

# Configure pod CIDR (advanced)
minikube start --cluster-cidr=192.168.0.0/16
```

### Storage Configuration
```bash
# Enable default storage class
minikube addons enable default-storageclass
minikube addons enable storage-provisioner

# List storage classes
kubectl get storageclass

# Create a test PVC
kubectl apply -f - <<EOF
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: test-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
EOF
```

## üîß Step 8: Troubleshooting Installation

### Common Issues and Solutions

#### Issue: VirtualBox conflicts
```bash
# Check for conflicting virtualization
# Windows: Disable Hyper-V
bcdedit /set hypervisorlaunchtype off

# Restart and try again
minikube start --driver=virtualbox
```

#### Issue: Docker permission denied
```bash
# Linux: Add user to docker group
sudo usermod -aG docker $USER
newgrp docker

# Test docker access
docker ps
```

#### Issue: Insufficient resources
```bash
# Check system resources
minikube status
minikube config view

# Reduce resource allocation
minikube config set memory 4096
minikube config set cpus 2

# Clean and restart
minikube delete
minikube start
```

#### Issue: Network connectivity
```bash
# Check proxy settings
echo $HTTP_PROXY
echo $HTTPS_PROXY

# Configure proxy for minikube
minikube start --http_proxy=$HTTP_PROXY --https_proxy=$HTTPS_PROXY
```

### Advanced Troubleshooting
```bash
# Get detailed logs
minikube logs

# Get logs for specific component
minikube logs --problems

# SSH into minikube node
minikube ssh

# View system information
minikube ssh -- df -h
minikube ssh -- free -h
minikube ssh -- ps aux
```

## ‚úÖ Success Criteria

### ‚úÖ Installation Checklist
- [ ] Minikube binary installed and accessible in PATH
- [ ] Container runtime (Docker/VirtualBox) installed and working
- [ ] System meets minimum requirements
- [ ] Minikube cluster starts successfully
- [ ] kubectl configured and working
- [ ] Can access Kubernetes API
- [ ] System pods are running
- [ ] Basic networking functional

### ‚úÖ Validation Commands
```bash
# All these should work without errors:
minikube version
minikube status
kubectl version --client
kubectl get nodes
kubectl get pods -n kube-system
minikube addons list
```

## üéØ Next Steps

After successful installation:

1. **Enable essential addons** (dashboard, ingress, metrics-server)
2. **Learn basic minikube commands** (start, stop, delete, ssh)
3. **Configure resource limits** based on your workload needs
4. **Set up development workflow** with minikube
5. **Explore advanced features** (profiles, tunneling, load balancing)

## üìö Key Takeaways

### What You've Learned
1. **Installation Methods**: Multiple ways to install minikube across platforms
2. **Driver Configuration**: Different virtualization backends and their trade-offs
3. **Resource Management**: How to configure CPU, memory, and disk allocation
4. **kubectl Integration**: Automatic and manual kubectl configuration
5. **Troubleshooting**: Common issues and their solutions

### Best Practices Implemented
- System requirement verification before installation
- Driver selection based on system capabilities
- Resource configuration optimization
- Comprehensive installation verification
- Proactive troubleshooting setup

This foundation ensures a robust minikube installation ready for development and testing workloads.