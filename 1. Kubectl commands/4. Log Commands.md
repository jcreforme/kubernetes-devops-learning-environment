# Log Commands

## [ ] kubectl logs, kubectl logs -f, kubectl logs --previous

### kubectl logs
```bash
# Get logs from a pod
kubectl logs <pod-name>

# Get logs from specific namespace
kubectl logs <pod-name> -n <namespace-name>

# Get logs with timestamps
kubectl logs <pod-name> --timestamps

# Show only last N lines
kubectl logs <pod-name> --tail=100

# Show logs since specific time
kubectl logs <pod-name> --since=1h
kubectl logs <pod-name> --since=2023-01-01T10:00:00Z

# Limit log output size
kubectl logs <pod-name> --limit-bytes=1024

# Get logs from all containers in pod
kubectl logs <pod-name> --all-containers=true

# Include container names in output
kubectl logs <pod-name> --all-containers=true --prefix=true
```

### kubectl logs -f
```bash
# Follow logs in real-time (like tail -f)
kubectl logs <pod-name> -f
kubectl logs <pod-name> --follow

# Follow logs with timestamps
kubectl logs <pod-name> -f --timestamps

# Follow logs from specific namespace
kubectl logs <pod-name> -f -n <namespace-name>

# Follow logs and show only last N lines initially
kubectl logs <pod-name> -f --tail=50

# Follow logs from all containers
kubectl logs <pod-name> -f --all-containers=true --prefix=true

# Follow logs with time filter
kubectl logs <pod-name> -f --since=10m
```

### kubectl logs --previous
```bash
# Get logs from previous container instance (after restart)
kubectl logs <pod-name> --previous
kubectl logs <pod-name> -p  # Short form

# Get previous logs from specific namespace
kubectl logs <pod-name> --previous -n <namespace-name>

# Get previous logs with timestamps
kubectl logs <pod-name> --previous --timestamps

# Get previous logs with tail
kubectl logs <pod-name> --previous --tail=100

# Useful for debugging crashed containers
kubectl logs <pod-name> --previous | grep ERROR
```

## Log Output and Filtering

### Search and Filter Logs
```bash
# Search for errors in logs
kubectl logs <pod-name> | grep ERROR
kubectl logs <pod-name> | grep -i error

# Search with context (show lines before/after match)
kubectl logs <pod-name> | grep -A 5 -B 5 "ERROR"

# Count occurrences
kubectl logs <pod-name> | grep -c "WARNING"

# Multiple pattern search
kubectl logs <pod-name> | grep -E "(ERROR|WARN|FATAL)"

# Case-insensitive search
kubectl logs <pod-name> | grep -i "exception"
```

### Save Logs
```bash
# Save logs to file
kubectl logs <pod-name> > pod-logs.txt

# Save logs with timestamps
kubectl logs <pod-name> --timestamps > pod-logs-timestamped.txt

# Append logs to existing file
kubectl logs <pod-name> --since=1h >> existing-logs.txt

# Save previous logs
kubectl logs <pod-name> --previous > crash-logs.txt

# Save logs from all containers
kubectl logs <pod-name> --all-containers=true > all-containers.log
```

## Common Use Cases

### Debugging Application Issues
```bash
# Check current logs
kubectl logs <pod-name>

# Check what happened before crash
kubectl logs <pod-name> --previous

# Monitor logs in real-time
kubectl logs <pod-name> -f

# Search for specific errors
kubectl logs <pod-name> | grep -i "error\|exception\|fail"
```

### Application Monitoring
```bash
# Monitor startup logs
kubectl logs <pod-name> -f --tail=0

# Check logs from last hour
kubectl logs <pod-name> --since=1h

# Monitor with timestamps for correlation
kubectl logs <pod-name> -f --timestamps
```

## Quick Reference Examples

```bash
# Basic log viewing
kubectl logs my-pod                    # View current logs
kubectl logs my-pod -f                 # Follow logs
kubectl logs my-pod --previous         # View previous logs

# Time-based filtering
kubectl logs my-pod --since=1h         # Last hour
kubectl logs my-pod --tail=100         # Last 100 lines

# Save and search
kubectl logs my-pod > logs.txt         # Save to file
kubectl logs my-pod | grep ERROR       # Search for errors
```